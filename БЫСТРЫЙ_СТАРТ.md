# âš¡ Ð‘Ñ‹ÑÑ‚Ñ€Ñ‹Ð¹ ÑÑ‚Ð°Ñ€Ñ‚

ÐšÑ€Ð°Ñ‚ÐºÐ¸Ðµ Ð¸Ð½ÑÑ‚Ñ€ÑƒÐºÑ†Ð¸Ð¸ Ð´Ð»Ñ Ð±Ñ‹ÑÑ‚Ñ€Ð¾Ð³Ð¾ Ð·Ð°Ð¿ÑƒÑÐºÐ° Ð°Ñ€Ñ…Ð¸Ð²Ð° ÑÑ‚Ñ€Ð¸Ð¼Ð¾Ð² Ð½Ð° Ubuntu ÑÐµÑ€Ð²ÐµÑ€Ðµ.

## ðŸš€ Ð—Ð° 5 Ð¼Ð¸Ð½ÑƒÑ‚

### 1. ÐÐ°ÑÑ‚Ñ€Ð¾Ð¹Ñ‚Ðµ Ð¾ÐºÑ€ÑƒÐ¶ÐµÐ½Ð¸Ðµ
```bash
# Ð¡Ð¾Ð·Ð´Ð°Ð¹Ñ‚Ðµ .env Ñ„Ð°Ð¹Ð»
cat > .env << 'EOF'
TELEGRAM_BOT_TOKEN="YOUR_BOT_TOKEN"
TELEGRAM_CHANNEL_USERNAME="@your_channel"
ADMIN_USER_ID="YOUR_TELEGRAM_ID"
EDITOR_PASSWORD_HASH="YOUR_PASSWORD_HASH"

S3_ACCESS_KEY_ID="YOUR_S3_ACCESS_KEY"
S3_SECRET_ACCESS_KEY="YOUR_S3_SECRET_KEY"
S3_BUCKET_NAME="bucket-817022"
S3_TENANT_ID="39d7ef97-9d7b-402b-83a9-cdc5a1bda6f4"

PORT=3000
NODE_ENV=production
EOF
```

### 2. Ð£ÑÑ‚Ð°Ð½Ð¾Ð²Ð¸Ñ‚Ðµ Ð¸ Ð·Ð°Ð¿ÑƒÑÑ‚Ð¸Ñ‚Ðµ
```bash
npm install
npm run setup:database
npm run build
npm start
```

### 3. ÐÐ°ÑÑ‚Ñ€Ð¾Ð¹Ñ‚Ðµ webhook
```bash
npm run setup:webhook
```

### 4. Ð˜Ð¼Ð¿Ð¾Ñ€Ñ‚ Ð´Ð°Ð½Ð½Ñ‹Ñ… (Ð¾Ð¿Ñ†Ð¸Ð¾Ð½Ð°Ð»ÑŒÐ½Ð¾)
Ð•ÑÐ»Ð¸ Ñƒ Ð²Ð°Ñ ÐµÑÑ‚ÑŒ ÑÐºÑÐ¿Ð¾Ñ€Ñ‚ Ð¸Ð· ÑÑ‚Ð°Ñ€Ð¾Ð¹ ÑÐ¸ÑÑ‚ÐµÐ¼Ñ‹:
```bash
# ÐŸÐ¾Ð¼ÐµÑÑ‚Ð¸Ñ‚Ðµ Ñ„Ð°Ð¹Ð»Ñ‹ ÑÐºÑÐ¿Ð¾Ñ€Ñ‚Ð° Ð² ÐºÐ¾Ñ€ÐµÐ½ÑŒ Ð¿Ñ€Ð¾ÐµÐºÑ‚Ð°
npm run import:streams
```

## ðŸ”§ ÐŸÐ¾Ð»ÑƒÑ‡ÐµÐ½Ð¸Ðµ Ð´Ð°Ð½Ð½Ñ‹Ñ…

### Telegram Bot Token:
1. ÐÐ°Ð¿Ð¸ÑˆÐ¸Ñ‚Ðµ [@BotFather](https://t.me/BotFather)
2. `/newbot` â†’ Ð²Ñ‹Ð±ÐµÑ€Ð¸Ñ‚Ðµ Ð¸Ð¼Ñ â†’ Ð¿Ð¾Ð»ÑƒÑ‡Ð¸Ñ‚Ðµ Ñ‚Ð¾ÐºÐµÐ½

### Ð’Ð°Ñˆ Telegram ID:
```bash
npm run setup:admin
```

### Ð¥ÐµÑˆ Ð¿Ð°Ñ€Ð¾Ð»Ñ:
```bash
npm run setup:password
```

### S3 ÐºÐ»ÑŽÑ‡Ð¸ cloud.ru:
1. Ð’Ð¾Ð¹Ð´Ð¸Ñ‚Ðµ Ð² [cloud.ru](https://cloud.ru)
2. ÐžÐ±Ð»Ð°Ñ‡Ð½Ð°Ñ Ð¿Ð»Ð°Ñ‚Ñ„Ð¾Ñ€Ð¼Ð° â†’ ÐžÐ±ÑŠÐµÐºÑ‚Ð½Ð¾Ðµ Ñ…Ñ€Ð°Ð½Ð¸Ð»Ð¸Ñ‰Ðµ
3. Ð¡Ð¾Ð·Ð´Ð°Ð¹Ñ‚Ðµ ÐºÐ»ÑŽÑ‡Ð¸ Ð´Ð¾ÑÑ‚ÑƒÐ¿Ð°

## ðŸ³ Docker (Ð°Ð»ÑŒÑ‚ÐµÑ€Ð½Ð°Ñ‚Ð¸Ð²Ð°)

```bash
# Ð¡Ð¾Ð·Ð´Ð°Ñ‚ÑŒ Dockerfile
cat > Dockerfile << 'EOF'
FROM node:18-alpine
WORKDIR /app
COPY package*.json ./
RUN npm install
COPY . .
RUN npm run build
EXPOSE 3000
CMD ["npm", "start"]
EOF

# Ð¡Ð¾Ð±Ñ€Ð°Ñ‚ÑŒ Ð¸ Ð·Ð°Ð¿ÑƒÑÑ‚Ð¸Ñ‚ÑŒ
docker build -t vod-archive .
docker run -d -p 3000:3000 --env-file .env vod-archive
```

## ðŸ”§ PM2 (Ñ€ÐµÐºÐ¾Ð¼ÐµÐ½Ð´ÑƒÐµÑ‚ÑÑ)

```bash
npm install -g pm2
pm2 start server.js --name vod-archive
pm2 startup
pm2 save
```

## âœ… ÐŸÑ€Ð¾Ð²ÐµÑ€ÐºÐ°

ÐŸÐ¾ÑÐ»Ðµ Ð·Ð°Ð¿ÑƒÑÐºÐ° Ð¿Ñ€Ð¾Ð²ÐµÑ€ÑŒÑ‚Ðµ:
- ðŸŒ Ð¡Ð°Ð¹Ñ‚: http://localhost:3000
- ðŸ“Š Ð¡Ñ‚Ð°Ñ‚ÑƒÑ: `pm2 status`
- ðŸ“ Ð›Ð¾Ð³Ð¸: `pm2 logs vod-archive`
- ðŸ”— Webhook: `npm run check:webhook`

## ðŸ†˜ ÐŸÑ€Ð¾Ð±Ð»ÐµÐ¼Ñ‹?

- **ÐžÑˆÐ¸Ð±ÐºÐ° Ð±Ð°Ð·Ñ‹ Ð´Ð°Ð½Ð½Ñ‹Ñ…**: `npm run setup:database`
- **ÐŸÑ€ÐµÐ²ÑŒÑŽ Ð½Ðµ Ñ€Ð°Ð±Ð¾Ñ‚Ð°ÑŽÑ‚**: Ð¿Ñ€Ð¾Ð²ÐµÑ€ÑŒÑ‚Ðµ S3 ÐºÐ»ÑŽÑ‡Ð¸
- **Webhook Ð½Ðµ Ñ€Ð°Ð±Ð¾Ñ‚Ð°ÐµÑ‚**: `npm run diagnose:webhook`
- **ÐÐµ Ð·Ð°Ð¿ÑƒÑÐºÐ°ÐµÑ‚ÑÑ**: Ð¿Ñ€Ð¾Ð²ÐµÑ€ÑŒÑ‚Ðµ Ð¿Ð¾Ñ€Ñ‚ `netstat -tulpn | grep 3000`

Ð“Ð¾Ñ‚Ð¾Ð²Ð¾! ðŸŽ‰ 
# ⚡ Быстрый старт

Краткие инструкции для быстрого запуска архива стримов на Ubuntu сервере.

## 🚀 За 5 минут

### 1. Настройте окружение
```bash
# Создайте .env файл
cat > .env << 'EOF'
TELEGRAM_BOT_TOKEN="YOUR_BOT_TOKEN"
TELEGRAM_CHANNEL_USERNAME="@your_channel"
ADMIN_USER_ID="YOUR_TELEGRAM_ID"
EDITOR_PASSWORD_HASH="YOUR_PASSWORD_HASH"

S3_ACCESS_KEY_ID="YOUR_S3_ACCESS_KEY"
S3_SECRET_ACCESS_KEY="YOUR_S3_SECRET_KEY"
S3_BUCKET_NAME="bucket-817022"
S3_TENANT_ID="39d7ef97-9d7b-402b-83a9-cdc5a1bda6f4"

PORT=3000
NODE_ENV=production
EOF
```

### 2. Установите и запустите
```bash
npm install
npm run setup:database
npm run build
npm start
```

### 3. Настройте webhook
```bash
npm run setup:webhook
```

### 4. Импорт данных (опционально)
Если у вас есть экспорт из старой системы:
```bash
# Поместите файлы экспорта в корень проекта
npm run import:streams
```

## 🔧 Получение данных

### Telegram Bot Token:
1. Напишите [@BotFather](https://t.me/BotFather)
2. `/newbot` → выберите имя → получите токен

### Ваш Telegram ID:
```bash
npm run setup:admin
```

### Хеш пароля:
```bash
npm run setup:password
```

### S3 ключи cloud.ru:
1. Войдите в [cloud.ru](https://cloud.ru)
2. Облачная платформа → Объектное хранилище
3. Создайте ключи доступа

## 🐳 Docker (альтернатива)

```bash
# Создать Dockerfile
cat > Dockerfile << 'EOF'
FROM node:18-alpine
WORKDIR /app
COPY package*.json ./
RUN npm install
COPY . .
RUN npm run build
EXPOSE 3000
CMD ["npm", "start"]
EOF

# Собрать и запустить
docker build -t vod-archive .
docker run -d -p 3000:3000 --env-file .env vod-archive
```

## 🔧 PM2 (рекомендуется)

```bash
npm install -g pm2
pm2 start server.js --name vod-archive
pm2 startup
pm2 save
```

## ✅ Проверка

После запуска проверьте:
- 🌐 Сайт: http://localhost:3000
- 📊 Статус: `pm2 status`
- 📝 Логи: `pm2 logs vod-archive`
- 🔗 Webhook: `npm run check:webhook`

## 🆘 Проблемы?

- **Ошибка базы данных**: `npm run setup:database`
- **Превью не работают**: проверьте S3 ключи
- **Webhook не работает**: `npm run diagnose:webhook`
- **Не запускается**: проверьте порт `netstat -tulpn | grep 3000`

Готово! 🎉 